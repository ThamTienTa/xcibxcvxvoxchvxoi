<!DOCTYPE html>
<html>
<head>
<title>Main Website</title>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
</head>

<body>
<h1>â›” Checking access...</h1>

<script>
const firebaseConfig = {
  apiKey: "YOUR_REAL_KEY",
  authDomain: "YOUR_PROJECT.firebaseapp.com",
  projectId: "YOUR_PROJECT_ID"
};

firebase.initializeApp(firebaseConfig);
const db = firebase.firestore();

firebase.auth().signInAnonymously();

firebase.auth().onAuthStateChanged(user => {
  if (!user) {
    location.href = "/index.html";
    return;
  }

  db.collection("submissions")
    .where("approved","==",true)
    .where("name","==",localStorage.getItem("studentName"))
    .get()
    .then(snap=>{
      if (snap.empty) {
        alert("âŒ Báº¡n chÆ°a Ä‘Æ°á»£c duyá»‡t");
        location.href="/index.html";
      } else {
        document.body.innerHTML = `
          <h1>ğŸ‰ Welcome to the real website</h1>
          <p>You are approved ğŸ”¥</p>
        `;
      }
    });
});
</script>
</body>
</html>
